/*!
 * json-gallery [v0.3]
 * MIT License (c) 2014 Jorge Yau
 * codenameyau.github.io
 */

function jsonGallery(e,t,n,r){initImageModal();t=t||4;n=n||2;r=r||2;var i={newRow:'<div class="row"><div class="col-md-'+t+" col-md-offset-"+r+'">',newCol:'<div class="col-md-'+t+'">'};$.getJSON(e,function(e){var t=e.gallery.length;var r=[];$.each(e.gallery,function(e,s){var o="";if(e%n==0)o+=i.newRow;else o+=i.newCol;o+='<div class="gallery-item"><img class="img-thumbnail img-responsive img-json-thumnail" src="'+s.images[0].image+'"><div class="json-thumbnail-title" data-images=\''+escapeQuotes(JSON.stringify(s.images,undefined,2))+"' data-title=\""+s.title+'" data-toggle="modal" data-target="#json-gallery-modal"><a class="json-title-link" href="'+s.link+'" target="_blank">'+s.title+"</a></div></div></div>";if(e%t==n-1)o+="</div>";r.push(o)});$(r.join("\n")).appendTo("#json-gallery")})}function initImageModal(){$('<div class="modal fade" id="json-gallery-modal" tabindex="-1" role="dialog" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-body" id="json-gallery-body"> <div id="json-gallery-carousel" class="carousel slide"> <ol class="carousel-indicators" id="json-gallery-indicators"> </ol> <div class="carousel-inner" id="json-gallery-carousel-inner"> </div> <div class="carousel-footer-bg"> </div> <a class="left carousel-control" href="#json-gallery-carousel" data-slide="prev"> <span class="glyphicon glyphicon-chevron-left"> </span> </a> <a class="right carousel-control" href="#json-gallery-carousel" data-slide="next"> <span class="glyphicon glyphicon-chevron-right"> </span> </a> </div> </div> </div> </div></div>').appendTo("#json-gallery")}function escapeQuotes(e){return e.replace(/'/g,"&#39;")}$(document.body).on("click",".json-thumbnail-title",function(){var e=$(this);var t=e.attr("data-images");var n=JSON.parse(t);var r=$("#json-gallery-indicators");var i=$("#json-gallery-carousel-inner");r.html("");i.html("");$.each(n,function(e,t){if(e==0){r.append('<li class="active" data-target="#json-gallery-modal" data-slide-to="'+e+'"></li>');i.append('<div class="item active"><img src="'+t.image+'" alt="'+t.caption+'"> <div class="carousel-caption"><h4 class="json-carousel-caption">'+t.caption+"</h4></div></div>")}else{r.append('<li data-target="#json-gallery-modal" data-slide-to="'+e+'"></li>');i.append('<div class="item"><img src="'+t.image+'" alt="'+t.caption+'"> <div class="carousel-caption"> <h4 class="json-carousel-caption">'+t.caption+"</h4> </div> </div>")}});$("#json-gallery-indicators, .carousel-footer-bg, .json-carousel-caption").hide()});$(document.body).on("mouseenter","#json-gallery-body",function(){$("#json-gallery-indicators, .carousel-footer-bg, .json-carousel-caption").fadeIn(400)});$(document.body).on("mouseleave","#json-gallery-body",function(){$("#json-gallery-indicators, .carousel-footer-bg, .json-carousel-caption").fadeOut(400)})
